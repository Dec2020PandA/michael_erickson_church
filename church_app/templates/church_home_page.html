{% extends "basechurch.html" %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'home_page.css' %}">
</head>
<body>
<div id="wrapper">
    {% block content %}
    <p>Finding a church to call home is one of the hardest and most important decisions you can make. We here at Community Church Finder are here to help you in that process. This site is designed for both churches and families, to be able to find one another and see if they are the right fit.</p>
    <div id="top_left">
        <h3>Communicate with other churches</h3>
        <form action="/church_add_message" method="post">
            {% csrf_token %}
            <p id="add_message"><textarea type="text" name="message" placeholder="Add message..."></textarea></p>
            <input id="submit" type="submit" value="Add Message">
        </form>
        {% for messages in all_messages %}
        <div id="messages">
            <h3>{{messages.message}}</h3>
            <h5>- <a href="/church_profile/{{messages.church.id}}">{{messages.church.church_name}}</a></h5>
            {% if messages.user.id == request.session.user_id %}
                <a href="/delete/{{messages.id}}">Delete</a>
            {% endif %}
        <div id="comment">
            {% for comment in messages.church_post_comments.all %}
                <p>{{comment.comment}}</p>
                <p>Commented by: <a href="/church_profile/{{comment.church.id}}">{{comment.church.church_name}}</a></p>
                {% if comment.church.id == request.session.church_id %}
                <a href="/delete_comment/{{comment.id}}">Delete</a>
                {% endif %}
                {% endfor %}
            <form action="/church_add_comment/{{messages.id}}" method="post">
                {% csrf_token %}
                <p>Comment: <input type="text" name="comment"></p>
                <input type="submit" value="Comment">
            </form>
        </div>
        {% endfor %}
    </div>
    </div>
    <div id="top_right">
        <h2><a href="/local_people">Possible Users In Your Area</a></h2>
        <h2>User Messages</h2>
        {% for messages in user_message %}
        <div id="messages">
                <h3>"{{messages.message}}"</h3>
                <h5>{{messages.user.created_at}}</h5>
                <h5>- <a href="/user_profile/{{messages.user.id}}">{{messages.user.first_name}} {{messages.user.last_name}}</a></h5>
        </div>
        <div id="comment">
            
            {% for comment in messages.user_post_comments.all %}
            <p>{{comment.comment}}</p>
            <p>Commented by: <a href="/user_profile/{{comment.user.id}}">{{comment.user.first_name}} {{comment.user.last_name}}</a></p>
            {% endfor %}
        {% endfor %}
        <!--add messages from followed churches and friends-->
        <!--liking capabilities and commenting capabilities-->
        <!--direct messaging capabilities to each person-->
        <!--person/church name is clickable to their specific profile-->
    </div>
    {% endblock %}
</div>
</body>
</html>